<link rel="import" href="bower_components/polymer/polymer.html">
<link rel="import" href="bower_components/app-layout/app-grid/app-grid-style.html">
<link rel="import" href="circle-number.html">
<dom-module id="order-row">
    <template>
        <style>
            :host {
                /*margin: 1em;*/
            }
        </style>
        <style include="app-grid-style">
            :host {
                --app-grid-columns: 7;
                --app-grid-item-height: auto;
                --app-grid-expandible-item-columns: 5;
            }

            ul {
                padding: 0;
                list-style: none;
            }

            .white-text {
                color: white;
                font-weight: bold;
            }
            .item {
                background-color: white;
                text-align: center;
                padding: 0.5em 0;
                margin: 1em 0;
                font-weight: bold;
            }

            .item .amount{
                margin-right: 0.5em;
                border-radius: 50%;
                background-color: black;
                font-weight: bold;
                color: white;
            }

            .item span.amount{
                line-height: 25px;
                display: inline-block;
                text-align: center;
                width: 25px;
            }

            .item-table {
                background-color: #F7B32D;
                border-radius: 5px 0 0 5px;
            }
            .item-items {
                @apply(--app-grid-expandible-item);
                text-align: left;
            }
            .item-time{
                background-color: #00b8d4;
                border-radius: 0 5px 5px 0;
            }
            .multi-item:not(:first-child) {
                margin-top: 0.8em;
            }
            .multi-item {
                margin-left: calc(40% - 40px);
            }
        </style>

        <ul class="app-grid">
            <li class="item item-table white-text"><span>BÃ€N [[tableNumber]]</span></li>
            <li class="item item-items">
                <template is="dom-repeat" items="[[items]]" as="item">
                    <div class="multi-item">
                        <!--<circle-number number="[[item.itemAmount]]"></circle-number>-->
                        <span class="amount">[[item.itemAmount]]</span>
                        <span class="name">[[capitalize(item.itemName)]]</span>
                    </div>
                </template>
            </li>
            <li class="item item-time white-text"><span>[[getOrderTime(orderTime)]]</span></li>
        </ul>
    </template>
    <script>
        Polymer({
            is: "order-row",
            properties: {
                tableNumber: Number,
                items: Array,
                orderTime: Date
            },
            getOrderTime: function(date){
                if(typeof date.getMonth === 'function'){
                    return date.toTimeString().substr(0, 5);
                }else {
                    return new Date(date).toTimeString().substr(0, 5);
                }
            },
            capitalize: function(text){
                return text.toUpperCase();
            }
        })
    </script>
</dom-module>